import java.util.Scanner;
import java.io.File;
import java.io.IOException;
import java.io.Serializable;
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.io.FileInputStream;
import java.io.ObjectInputStream;
class Film implements Serializable {
    String country, name, genre;
    double year, price;
}

public class Project2{
    public static void main(String[] args) throws IOException, ClassNotFoundException{
        Scanner sc=new Scanner(System.in);
        File rec_FILM2=new File("C:\\My\\rec_FILM2.txt");
        File answer=new File("C:\\My\\answer.txt");
        if (answer.exists()) {answer.delete(); }
        answer.createNewFile();
        if (rec_FILM2.exists()) {rec_FILM2.delete();}
        rec_FILM2.createNewFile();
        System.out.println("Введите количество фильмов для записи в файл\n"
                + "=> ");
        int count = sc.nextInt();
        int kolRussia=0;
        FileOutputStream f1 = new FileOutputStream(rec_FILM2);
        ObjectOutputStream oos1 = new ObjectOutputStream(f1);
        FileOutputStream fOSAnswer = new FileOutputStream(answer);
        ObjectOutputStream oosAnswer = new ObjectOutputStream(fOSAnswer);
        Film film = new Film();
        sc.nextLine();
        for (int i = 0; i < count; i++) {
            film = new Film();
            System.out.println("Введите название фильма ");
            film.name = sc.nextLine();
            sc.nextLine();
            System.out.println("Введите страну производителя ");
            film.country = sc.nextLine();
            System.out.println("Введите жанр  ");
            film.genre = sc.nextLine();
            System.out.println("Введите год выпуска  ");
            film.year = sc.nextDouble();
            System.out.println("Введите стоимость билета  ");
            film.price = sc.nextDouble();
            oos1.writeObject(film);
            if (film.country.equals("Russia")){
                oosAnswer.writeObject(film);
                kolRussia+=1;
            }
            if (film.country.equals("Россия")){
                oosAnswer.writeObject(film);
                kolRussia+=1;
            }
        }
        FileInputStream fis = new FileInputStream(answer);
        ObjectInputStream oin = new ObjectInputStream(fis);
        int kol=1;
        System.out.println("Русские фильмы ->");
        if (kolRussia!=0){
            for (int i = 0; i < kolRussia; i++) {
                film = (Film) oin.readObject();
                System.out.println(" Фильм номер "+ kol);
                System.out.println(" Название фильма => "+ film.name);
                System.out.println(" страна производитель => "+ film.country);
                System.out.println(" жанр => "+ film.genre);
                System.out.println(" год выпуска => "+ film.year);
                System.out.println(" цена билета => "+ film.price);
                System.out.println();
                kol+=1;
            }
        } else {
            System.out.println("Таких фильмов не записано ");
        }
        oos1.flush();
        oos1.close();
        int kol1=1;
        System.out.println();
        System.out.println("Нужно ли вывести информацию обо всех фильмах ? ");
        System.out.println("Введите ДА если нужно и НЕТ если не нужно ");
        sc.nextLine();
        String ask=sc.nextLine();
        if (ask.equals("ДА")){
            fis = new FileInputStream(rec_FILM2);
            oin = new ObjectInputStream(fis);
            for (int i = 0; i < count; i++) {
                film = (Film) oin.readObject();
                System.out.println(" Фильм номер "+ kol1);
                System.out.println(" Название фильма => "+ film.name);
                System.out.println(" страна производитель => "+ film.country);
                System.out.println(" жанр => "+ film.genre);
                System.out.println(" год выпуска => "+ film.year);
                System.out.println(" цена билета => "+ film.price);
                System.out.println();
                kol1+=1;
            }
        }
        oosAnswer.flush();
        oosAnswer.close();
    }
}
